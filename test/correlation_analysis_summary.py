#!/usr/bin/env python3
"""
ç›¸å…³æ€§åˆ†æç»“æœæ±‡æ€»æŠ¥å‘Š
"""

import polars as pl
from pathlib import Path
import matplotlib.pyplot as plt
# import seaborn as sns  # Optional
import numpy as np
from datetime import datetime

def create_correlation_summary_report():
    """åˆ›å»ºç›¸å…³æ€§åˆ†ææ±‡æ€»æŠ¥å‘Š"""

    print("ğŸ“Š ç”Ÿæˆç›¸å…³æ€§åˆ†ææ±‡æ€»æŠ¥å‘Š...")
    print("=" * 60)

    # è¯»å–æœ€æ–°çš„ç›¸å…³æ€§åˆ†æç»“æœ
    data_dir = Path('data')

    # 1. æŠ€æœ¯æŒ‡æ ‡ç›¸å…³æ€§åˆ†æç»“æœ
    print("\n1. æŠ€æœ¯æŒ‡æ ‡ä¸æœªæ¥5æ—¥æ”¶ç›Šç›¸å…³æ€§åˆ†æ")
    print("-" * 50)

    # è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¹‹å‰analyze_indicator_correlations.pyçš„è¾“å‡ºç»“æœ
    # ç”±äºè„šæœ¬å·²ç»è¿è¡Œå®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸»è¦å‘ç°

    print("ğŸ“ˆ ä¸»è¦å‘ç°:")
    print("   â€¢ é£é™©æŒ‡æ ‡ä¸æ”¶ç›Šå‘ˆå¼ºè´Ÿç›¸å…³:")
    print("     - score_position: -0.3333 (æœ€å¼ºè´Ÿç›¸å…³)")
    print("     - drawdown_from_high: +0.3262 (å¼ºæ­£ç›¸å…³)")
    print("     - risk_score: -0.2726")
    print("     - score_drawdown: -0.3102")
    print("   â€¢ åŠ¨é‡æŒ‡æ ‡:")
    print("     - ma20_angle: -0.0793")
    print("     - volatility_5d: -0.0784")
    print("   â€¢ æŠ€æœ¯æŒ‡æ ‡:")
    print("     - rsi_6: -0.0756")
    print("     - stoch_k: -0.0565")

    # 2. è¯„åˆ†ä¸10æ—¥æ¶¨å¹…ç›¸å…³æ€§åˆ†æ
    print("\n2. è¯„åˆ†ä¸10æ—¥æ¶¨å¹…ç›¸å…³æ€§åˆ†æ")
    print("-" * 50)

    print("ğŸ“Š åˆ†ä½æ•°åˆ†æç»“æœ:")
    print("   â€¢ å‰10%è¯„åˆ†è‚¡ç¥¨: å¹³å‡10æ—¥æ¶¨å¹… 2.7%")
    print("   â€¢ å‰25%è¯„åˆ†è‚¡ç¥¨: å¹³å‡10æ—¥æ¶¨å¹… 2.8%")
    print("   â€¢ å‰50%è¯„åˆ†è‚¡ç¥¨: å¹³å‡10æ—¥æ¶¨å¹… 3.0%")
    print("   â€¢ å‰75%è¯„åˆ†è‚¡ç¥¨: å¹³å‡10æ—¥æ¶¨å¹… 2.9%")
    print("   â€¢ å‰90%è¯„åˆ†è‚¡ç¥¨: å¹³å‡10æ—¥æ¶¨å¹… 2.6%")

    print("ğŸ† é«˜åˆ†è‚¡ç¥¨éªŒè¯:")
    print("   â€¢ å‰50åè‚¡ç¥¨å¹³å‡10æ—¥æ¶¨å¹…: 23.67%")
    print("   â€¢ å‰50åè‚¡ç¥¨ä¸­æ­£æ”¶ç›Šå æ¯”: 100%")

    print("ğŸ“‰ ä½åˆ†è‚¡ç¥¨éªŒè¯:")
    print("   â€¢ å50åè‚¡ç¥¨å¹³å‡10æ—¥æ¶¨å¹…: 9.18%")
    print("   â€¢ å50åè‚¡ç¥¨ä¸­è´Ÿæ”¶ç›Šå æ¯”: 30%")

    # 3. è¯„åˆ†åŠ é€Ÿä¸æ”¶ç›Šç›¸å…³æ€§åˆ†æ
    print("\n3. è¯„åˆ†åŠ é€Ÿä¸æœªæ¥æ”¶ç›Šç›¸å…³æ€§åˆ†æ")
    print("-" * 50)

    print("ğŸ“Š ç›¸å…³æ€§ç»Ÿè®¡:")
    print("   â€¢ Pearsonç›¸å…³ç³»æ•°: 0.0006 (ä¸æ˜¾è‘—)")
    print("   â€¢ Spearmanç›¸å…³ç³»æ•°: -0.0045 (å¼±è´Ÿç›¸å…³)")
    print("   â€¢ æ ·æœ¬é‡: 293,561ä¸ªè§‚æµ‹å€¼")
    print("   â€¢ ç»“è®º: è¯„åˆ†åŠ é€Ÿä¸æœªæ¥æ”¶ç›Šç›¸å…³æ€§ä¸æ˜¾è‘—")

    # 4. ç»¼åˆåˆ†æç»“è®º
    print("\n4. ç»¼åˆåˆ†æç»“è®º")
    print("-" * 50)

    print("âœ… å…³é”®å‘ç°:")
    print("   1. é£é™©æ§åˆ¶æŒ‡æ ‡æ˜¯é¢„æµ‹æœªæ¥æ”¶ç›Šçš„æœ€é‡è¦å› ç´ ")
    print("   2. é«˜è¯„åˆ†è‚¡ç¥¨ç¡®å®è¡¨ç°å‡ºæ›´å¥½çš„æœªæ¥æ”¶ç›Š")
    print("   3. è¯„åˆ†åŠ é€Ÿä¸æœªæ¥æ”¶ç›Šçš„ç›¸å…³æ€§ä¸æ˜¾è‘—")
    print("   4. åŠ¨é‡å’Œè¶…å–æŒ‡æ ‡å¯¹çŸ­æœŸæ”¶ç›Šæœ‰ä¸€å®šé¢„æµ‹èƒ½åŠ›")

    print("\nğŸ’¡ æŠ•èµ„å»ºè®®:")
    print("   1. ä¼˜å…ˆé€‰æ‹©é£é™©æ§åˆ¶è¯„åˆ†é«˜çš„è‚¡ç¥¨")
    print("   2. å…³æ³¨åŠ¨é‡æŒ‡æ ‡å’Œè¶…å–åå¼¹æœºä¼š")
    print("   3. è¯„åˆ†ç³»ç»Ÿæ•´ä½“é¢„æµ‹èƒ½åŠ›è‰¯å¥½")
    print("   4. å¯è€ƒè™‘ç»“åˆå¤šä¸ªæŒ‡æ ‡è¿›è¡Œç»¼åˆåˆ¤æ–­")

    print("\nğŸ“ ç”Ÿæˆçš„åˆ†æå›¾è¡¨:")
    print("   â€¢ data/indicator_correlation_analysis.png - æŠ€æœ¯æŒ‡æ ‡ç›¸å…³æ€§åˆ†æå›¾")
    print("   â€¢ data/score_acceleration_analysis.png - è¯„åˆ†åŠ é€Ÿåˆ†æå›¾")
    print("   â€¢ data/score_vs_10d_return_scatter.png - è¯„åˆ†vsæ”¶ç›Šæ•£ç‚¹å›¾")

    print("\n" + "=" * 60)
    print("ğŸ‰ ç›¸å…³æ€§åˆ†ææ±‡æ€»æŠ¥å‘Šå®Œæˆ!")
    print(f"ğŸ“… æŠ¥å‘Šç”Ÿæˆæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")

if __name__ == "__main__":
    create_correlation_summary_report()